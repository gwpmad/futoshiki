(this["webpackJsonpfutoshiki-game"]=this["webpackJsonpfutoshiki-game"]||[]).push([[0],{26:function(n,e,t){n.exports=t(41)},41:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),o=t(14),c=t.n(o),u=t(3),i=t(21),l=t(1),f=t(2);function s(){var n=Object(f.a)(["\n  max-width: 500px;\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: center;\n"]);return s=function(){return n},n}var d=l.d.div(s());function v(){var n=Object(f.a)(["\n    color: ",";\n    margin-top: 0;\n    margin-bottom: 4px;\n    text-align: center;\n  "]);return v=function(){return n},n}function b(){var n=Object(f.a)(["\n  ","\n"]);return b=function(){return n},n}var m=l.d.h1(b(),(function(n){var e=n.theme;return Object(l.c)(v(),e.colors.lightBlack)})),h=t(5),p=t(6);function g(){var n=Object(f.a)(["\n    align-items: center;\n    background-image: radial-gradient(\n      ",",\n      ","\n    );\n    display: flex;\n    font-family: Verdana, Geneva, Tahoma, sans-serif;\n    height: 100%;\n    justify-content: center;\n    position: relative;\n    z-index: 1;\n\n    &:before {\n      background-image: radial-gradient(\n        ",",\n        ","\n      );\n      bottom: 0;\n      content: '';\n      left: 0;\n      opacity: ",";\n      position: absolute;\n      transition: opacity 0.3s linear;\n      right: 0;\n      top: 0;\n      z-index: -1;\n    }\n  "]);return g=function(){return n},n}function O(){var n=Object(f.a)(["\n  ","\n"]);return O=function(){return n},n}var j=l.d.div(O(),(function(n){var e=n.gameCompleted,t=n.theme.colors;return Object(l.c)(g(),t.lightTurquoise,t.darkTurquoise,t.limeGreen,t.faintLimeGreen,e?"1":"0")}));var E=function n(e,t){if(!Array.isArray(e)&&!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0};var y=function(n){return JSON.parse(JSON.stringify(n))};var x=function(n,e){return n.filter((function(n){var t=Object(h.a)(n,2),r=t[0],a=t[1];return r===e[0]&&a===e[1]})).length};var w=function(){return[B(0,4),B(0,4)]};var k=function(n,e){var t=Object(h.a)(n,2),r=t[0],a=t[1];return{right:[r,a+1],left:[r,a-1],above:[r-1,a],below:[r+1,a]}[e]};var C=function(n){return.66666666*n};var B=function(n,e){var t=Math.ceil(n),r=Math.floor(e);return Math.floor(Math.random()*(r-t+1))+t};var T=function(n,e,t){var r=k(e,t);return K(n,r)};var G=function(n){for(var e=n.slice(),t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),a=[e[r],e[t]];e[t]=a[0],e[r]=a[1]}return e};var L=function(n,e){var t=n.map((function(n){return n.map((function(n){var e=n.enteredValue,t=n.value;return e||t}))}));return E(t,e)},_=t(4);var A=function(){var n,e=function(){for(var n=Object(_.a)(new Array(5)).map((function(n,e){return e+1})),e=[],t=0;t<5;t++)e[t]=[].concat(Object(_.a)(n.slice(t,n.length)),Object(_.a)(n.slice(0,t)));return e}();return e=G(e),e=(n=e).map((function(e,t){return n.map((function(n){return n[t]}))})),e=G(e)};var N=function(n,e){for(var t=function(n){return Object.entries(n).reduce((function(n,e){var t=Object(h.a)(e,2),r=t[0],a=t[1].map((function(n){return[n,k(n,r)]}));return[].concat(Object(_.a)(n),Object(_.a)(a))}),[])}(e),r=[],a=0;a<n;a++){var o=void 0;do{o=w()}while(!c(o));r.push(o)}return r;function c(n){return!(x(r,n)>0)&&!function(n){return t.some((function(e){var t=e.filter((function(e){return e[0]!==n[0]||e[1]!==n[1]}));if(t.length>1)return!1;var a=Object(h.a)(t,1)[0];return x(r,a)>0}))}(n)}};function S(n){return n.map((function(n){return n.map((function(){return{greaterThan:[]}}))}))}function M(n,e,t){var r=function(n,e){var t=V(n,e),r=e-(o=t,Object.values(o).flat().length),a=N(r,t);var o;return{greaterThanCoordinates:t,valueCoordinates:a}}(e,t);!function(n,e){Object.entries(e).forEach((function(e){var t=Object(h.a)(e,2),r=t[0];t[1].forEach((function(e){var t=Object(h.a)(e,2),a=t[0],o=t[1];n[a][o].greaterThan.push(r)}))}))}(n,r.greaterThanCoordinates),function(n,e,t){t.forEach((function(t){var r=Object(h.a)(t,2),a=r[0],o=r[1];n[a][o].value=e[a][o]}))}(n,e,r.valueCoordinates),function(n){n.forEach((function(n){return n.forEach((function(n){n.value||(n.enteredValue=null,n.notes=[])}))}))}(n)}function z(n){return 1!==X(n).length}var I=function(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;do{var r=B(t,t+2);M(e=S(n),n,r),t++}while(z(e));return e},D=t(12);var V=function(n,e){return function(n){for(var e={above:[],below:[],left:[],right:[]},r=0;r<n;r++){var a=void 0,c=void 0;do{a=w(),c=t(e,a)}while(!o(a,c,e));e[c].push(a)}return e}(B(e/2,C(e)));function t(n,e){var t,o=G(Object.keys(n)),c=Object(D.a)(o);try{for(c.s();!(t=c.n()).done;){var u=t.value;if(!r(e,u,n)&&a(e,u))return u}}catch(i){c.e(i)}finally{c.f()}}function r(n,e,t){return x(t[e],n)>0}function a(e,t){var r=K(n,e),a=T(n,e,t);return Boolean(a)&&r>a}function o(n,e,t){return Boolean(e)&&!function(n,e){var t=function(n){return Object.values(n).flat()}(e);return 2===x(t,n)}(n,t)}};var K=function(n,e){return(n[e[0]]||[])[e[1]]},q=[["right","left"],["left","right"],["above","below"],["below","above"]];function R(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],r=y(n),a=K(r,t);if(H(t)){var o=J(r);return U(e,o)?null:o}if(a.value)return R(r,e,W(t));var c=F(r,t);if(!c.length)return null;var u,i=Object(D.a)(c);try{for(i.s();!(u=i.n()).done;){var l=u.value,f=P(l,r,t,a);if(!f){a.value=l;var s=R(r,e,t);if(s)return s}}}catch(d){i.e(d)}finally{i.f()}return null}function H(n){return 5===n[0]}function J(n){return n.map((function(n){return n.map((function(n){return n.value}))}))}function U(n,e){return n.some((function(n){return E(e,n)}))}function W(n){var e=Object(h.a)(n,2),t=e[0],r=e[1];return 4===r?[t+1,0]:[t,r+1]}function F(n,e){var t,r=(t=5,Object(_.a)(new Array(t)).map((function(n,e){return e+1})));function a(n){r=r.filter((function(e){return e!==n}))}for(var o=0;o<5;o++){var c=K(n,[e[0],o]);c.value&&a(c.value)}for(var u=0;u<5;u++){var i=K(n,[u,e[1]]);i.value&&a(i.value)}return function(n,e){return q.some((function(t){var r=Object(h.a)(t,2),a=r[0],o=r[1],c=T(n,e,a);return c&&c.greaterThan.includes(o)}))}(n,e)&&a(5),function(n,e){var t=K(n,e);return Boolean(t.greaterThan.length)}(n,e)&&a(1),r}function P(){var n=$.apply(void 0,arguments),e=Q.apply(void 0,arguments);return Boolean(n||e)}function $(n,e,t,r){var a,o=Object(D.a)(r.greaterThan);try{for(o.s();!(a=o.n()).done;){var c=a.value,u=T(e,t,c);if(u&&u.value>n)return!0}}catch(i){o.e(i)}finally{o.f()}return!1}function Q(n,e,t){var r,a=Object(D.a)(q);try{for(a.s();!(r=a.n()).done;){var o=Object(h.a)(r.value,2),c=o[0],u=o[1],i=T(e,t,c)||{},l=i.value,f=i.greaterThan;if(l&&n>l&&f.includes(u))return!0}}catch(s){a.e(s)}finally{a.f()}return!1}var X=function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t.length<15){var r=R(e,t);if(r)return t.push(r),n(e,t)}return t};var Y=function(n,e){return k(n,e).map((function(n){return n<0?n+5:n%5}))},Z=t(7),nn={fullGrid:null,gameGrid:null,selectedBlock:null,notesMode:!1,gameCompleted:!1};var en=function(n){return{coords:n,type:"SELECT_BLOCK"}},tn=function(n){return{enteredValue:n,type:"SET_BLOCK_VALUE"}},rn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,e=arguments.length>1?arguments[1]:void 0,t=n.selectedBlock;switch(e.type){case"CREATE_GRID":var r=A(),a=I(r);return Object(Z.a)({},n,{fullGrid:r,gameGrid:a,selectedBlock:null,gameCompleted:!1,notesMode:!1});case"DESELECT_BLOCK":return Object(Z.a)({},n,{selectedBlock:null});case"SELECT_BLOCK":return Object(Z.a)({},n,{selectedBlock:e.coords});case"SET_BLOCK_VALUE":return Object(Z.a)({},n,{gameGrid:n.gameGrid.map((function(n,r){return n.map((function(n,a){return t[0]!==r||t[1]!==a?n:Object(Z.a)({},n,{enteredValue:e.enteredValue})}))}))});case"CHECK_SOLUTION":var o=L(n.gameGrid,n.fullGrid);return o?Object(Z.a)({},n,{gameCompleted:!0,selectedBlock:null}):n;case"TOGGLE_NOTES_MODE":return Object(Z.a)({},n,{notesMode:!n.notesMode});case"EDIT_BLOCK_NOTES":return Object(Z.a)({},n,{gameGrid:n.gameGrid.map((function(n,r){return n.map((function(n,a){if(t[0]!==r||t[1]!==a)return n;var o=n.notes.includes(e.note)?n.notes.filter((function(n){return n!==e.note})):[].concat(Object(_.a)(n.notes),[e.note]);return Object(Z.a)({},n,{notes:o})}))}))});case"CHEAT":return Object(Z.a)({},n,{gameCompleted:!0,selectedBlock:null});default:return n}},an=function(){var n=Object(u.c)((function(n){return n.selectedBlock})),e=Object(u.b)(),t=Object(r.useCallback)((function(){n&&e({type:"DESELECT_BLOCK"})}),[e,n]),o=Object(u.c)((function(n){return!n.gameGrid}));Object(r.useEffect)((function(){o&&e({type:"CREATE_GRID"})}),[e,o]);var c=["above","below","left","right"].map((function(t){return function(){n&&e(en(Y(n,t)))}})),i=Object(h.a)(c,4),l=i[0],f=i[1],s=i[2],v=i[3];Object(p.a)("up",l),Object(p.a)("down",f),Object(p.a)("left",s),Object(p.a)("right",v),Object(p.a)("esc",(function(){return e({type:"DESELECT_BLOCK"})}));var b=Object(u.c)((function(e){var t=e.gameGrid,r=e.notesMode;return!(!t||!n||r)&&!K(t,n).value})),g=Object(u.c)((function(e){var t=e.gameGrid,r=e.notesMode;if(!t||!n||!r)return!1;var a=K(t,n),o=a.enteredValue;return!a.value&&!o}));function O(n){return b?e(tn(n)):g?e({note:n,type:"EDIT_BLOCK_NOTES"}):void 0}function E(){b&&e(tn(null))}Object(p.a)("1",(function(){return O(1)})),Object(p.a)("2",(function(){return O(2)})),Object(p.a)("3",(function(){return O(3)})),Object(p.a)("4",(function(){return O(4)})),Object(p.a)("5",(function(){return O(5)})),Object(p.a)("backspace",E),Object(p.a)("del",E),Object(p.a)("shift",(function(){return e({type:"TOGGLE_NOTES_MODE"})}));var y=Object(u.c)((function(n){return n.gameCompleted})),x=y?"Correct!":"Futoshiki";return a.a.createElement(j,{className:"app-container",gameCompleted:y,onClick:t},a.a.createElement(d,{className:"content"},a.a.createElement(m,{className:"title"},x),a.a.createElement(Cn,null),a.a.createElement(un,null)))};function on(){var n=Object(f.a)(["\n  display: flex;\n  flex: 1;\n  margin-top: 4px;\n  position: relative;\n"]);return on=function(){return n},n}var cn=l.d.div(on()),un=function(){return a.a.createElement(cn,{className:"below-game"},a.a.createElement(Ln,null),a.a.createElement(In,null))};function ln(){var n=Object(f.a)(["\n    color: ",";\n    cursor: auto;\n    font-size: 33px;\n    position: absolute;\n    ","\n  "]);return ln=function(){return n},n}function fn(){var n=Object(f.a)(["\n  ","\n"]);return fn=function(){return n},n}var sn=l.d.div(fn(),(function(n){var e=n.direction,t=n.theme.colors;return Object(l.c)(ln(),t.lightBlack,function(n){switch(n){case"right":return"left: 114%;\n      @-moz-document url-prefix() {\n        bottom: 21%;\n      }";case"left":return"right: 114%;\n      transform: rotate(180deg);\n      @-moz-document url-prefix() {\n        bottom: 10%;\n      }";case"above":return"transform: rotate(270deg);\n      bottom: 98%;\n      @-moz-document url-prefix() {\n        left: 29%;\n      }";case"below":return"transform: rotate(90deg);\n      top: 98%;\n      @-moz-document url-prefix() {\n        right: 29%;\n      }";default:return""}}(e))})),dn=function(n){var e=n.direction;return a.a.createElement(sn,{direction:e},"\u276f")};function vn(){var n=Object(f.a)(["\n      align-items: center;\n      background-color: ",";\n      border: solid 3px ",";\n      color: ",";\n      cursor: pointer;\n      display: flex;\n      flex-basis: 0; /* sets the main size for all blocks */\n      flex-grow: 1; /* allows the same growth for all blocks, to a factor of their main size */\n      flex-shrink: 0; /* allows shrink down to main size (flex-basis) if the row/grid is thinner than all blocks put together */\n      font-size: 40px;\n      justify-content: center;\n      margin: 15px;\n      position: relative;\n      transition: color 0.3s linear;\n      user-select: none;\n\n      &:before {\n        padding-top: 100%; /* gives the box height - percentages are based on the WIDTH of the containing box so box width and height will scale together */\n        content: '';\n        float: left;\n      }\n\n      &:hover {\n        background-color: ",";\n      }\n    "]);return vn=function(){return n},n}function bn(){var n=Object(f.a)(["\n  ","\n"]);return bn=function(){return n},n}var mn=l.d.div(bn(),(function(n){var e=n.containsValueClue,t=n.gameCompleted,r=n.isActive,a=n.theme.colors,o=e?a.lightBlack:a.pastelBlue;return t&&(o=a.midBlue),Object(l.c)(vn(),a.white,r?a.transparent:a.lightBlack,o,r?a.white:a.lightBlue)}));function hn(){var n=Object(f.a)(["\n    display: flex;\n    font-size: 16px;\n    justify-content: space-between;\n    width: 90%;\n  "]);return hn=function(){return n},n}function pn(){var n=Object(f.a)(["\n  ","\n"]);return pn=function(){return n},n}var gn=l.d.div(pn(),(function(){return Object(l.c)(hn())}));function On(){var n=Object(f.a)(["\n    font-weight: ",";\n    opacity: ",";\n  "]);return On=function(){return n},n}function jn(){var n=Object(f.a)(["\n  ","\n"]);return jn=function(){return n},n}var En=l.d.div(jn(),(function(n){var e=n.isActive;return Object(l.c)(On(),e?"bold":"inherit",e?1:.25)})),yn=function(n){var e=n.notes;return a.a.createElement(gn,null,r.Children.toArray(Object(_.a)(new Array(5)).map((function(n,t){var r=t+1,o=e.includes(r);return a.a.createElement(En,{isActive:o},r)}))))},xn=function(n){var e=n.rowIndex,t=n.colIndex,o=Object(u.c)((function(n){var r=n.gameGrid;return r?r[e][t].greaterThan:[]})),c=Object(u.c)((function(n){var r=n.selectedBlock;return!!r&&(r[0]===e&&r[1]===t)})),i=Object(u.c)((function(n){var r=n.gameGrid;return!!r&&Boolean(r[e][t].value)})),l=Object(u.c)((function(n){var r=n.gameGrid;if(!r)return null;var a=r[e][t],o=a.enteredValue,c=a.value;return i?c:o})),f=Object(u.c)((function(n){return n.gameCompleted})),s=Object(u.c)((function(n){var r=n.gameGrid;return!r||i?null:r[e][t].notes})),d=Object(u.c)((function(n){var e=n.notesMode;return!(l||!s)&&e})),v=Object(u.b)(),b=Object(r.useCallback)((function(n){n.stopPropagation(),c||f||v(en([e,t]))}),[c,f,e,t,v]);return Object(r.useEffect)((function(){f||i||!l||d||v({type:"CHECK_SOLUTION"})}),[i,l,f,d,v]),a.a.createElement(mn,{containsValueClue:i,gameCompleted:f,greaterThan:o,isActive:c,onClick:b,showNotes:d},d?a.a.createElement(yn,{notes:s}):l||"",r.Children.toArray(o.map((function(n){return a.a.createElement(dn,{direction:n})}))))};function wn(){var n=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  margin: 10px 0;\n"]);return wn=function(){return n},n}var kn=l.d.div(wn()),Cn=function(){return a.a.createElement(kn,{className:"grid"},r.Children.toArray(Object(_.a)(new Array(5)).map((function(n,e){return a.a.createElement(Nn,{rowIndex:e})}))))};function Bn(){var n=Object(f.a)(["\n    background-color: white;\n    border: 3px solid ",";\n    border-radius: 4px;\n    color: ",";\n    cursor: pointer;\n    font-size: 25px;\n    padding: 5px 20px 6px;\n\n    /* \n      Centre the button\n      The translate percentage refers to the width of the item itself. Left 50% pushes all of the item past 50% of the positioned ancestor so the translate\n      is required to push half of it back the other way and properly centre it\n      From this great SO answer: https://stackoverflow.com/questions/32551291/in-css-flexbox-why-are-there-no-justify-items-and-justify-self-properties/33856609#33856609\n    */\n    position: absolute;\n    left: 50%;\n    transform: translate(-50%, 0);\n\n    &:hover {\n      background-color: ",";\n    }\n\n    &:focus {\n      outline: none;\n    }\n  "]);return Bn=function(){return n},n}function Tn(){var n=Object(f.a)(["\n  ","\n"]);return Tn=function(){return n},n}var Gn=l.d.button(Tn(),(function(n){var e=n.theme.colors;return Object(l.c)(Bn(),e.lightBlack,e.lightBlack,e.lightBlue)})),Ln=function(){var n=Object(u.b)(),e=Object(r.useCallback)((function(){n({type:"CREATE_GRID"})}),[n]);return a.a.createElement(Gn,{className:"new-game-button",onClick:e},"New Game")};function _n(){var n=Object(f.a)(["\n  display: flex;\n  flex-flow: row;\n  justify-content: space-around;\n"]);return _n=function(){return n},n}var An=l.d.div(_n()),Nn=function(n){var e=n.rowIndex;return a.a.createElement(An,{className:"row"},r.Children.toArray(Object(_.a)(Array(5)).map((function(n,t){return a.a.createElement(xn,{rowIndex:e,colIndex:t})}))))};function Sn(){var n=Object(f.a)(["\n    background-color: white;\n    border: 3px solid ",";\n    border-radius: 4px;\n    color: ",";\n    cursor: pointer;\n    font-size: 14px;\n    margin-left: auto;\n    margin-right: 15px;\n    padding: 5px;\n    transition: opacity 0.3s linear;\n    opacity: ",";\n    width: 96px;\n\n    &:focus {\n      outline: none;\n    }\n\n    &:hover {\n      background-color: ",";\n    }\n\n    .keyboard-shortcut {\n      margin: 0;\n      font-size: 11px;\n    }\n  "]);return Sn=function(){return n},n}function Mn(){var n=Object(f.a)(["\n  ","\n"]);return Mn=function(){return n},n}var zn=l.d.button(Mn(),(function(n){var e=n.gameCompleted,t=n.theme.colors;return Object(l.c)(Sn(),t.lightBlack,t.lightBlack,e?0:1,t.lightBlue)})),In=function(){var n=Object(u.b)(),e=Object(r.useCallback)((function(e){e.stopPropagation(),n({type:"TOGGLE_NOTES_MODE"})}),[n]),t=Object(u.c)((function(n){return n.notesMode?"Hide":"Show"})),o=Object(u.c)((function(n){return n.gameCompleted}));return a.a.createElement(zn,{gameCompleted:o,onClick:e},t," Notes",a.a.createElement("p",{className:"keyboard-shortcut"},"(Shift \u21e7)"))},Dn=t(8),Vn=(t(38),t(17)),Kn=t(25),qn=t.n(Kn),Rn=Object(Vn.a)({key:"futoshiki",storage:qn.a},rn);var Hn=function(){var n=Object(Dn.createStore)(Rn,void 0);return{persistor:Object(Vn.b)(n),store:n}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Jn(){var n=Object(f.a)(["\n    html {\n      height: 100%;\n\n      body {\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n        margin: 0;\n\n        #root {\n          height: 100%;\n        }\n      }\n    }\n  "]);return Jn=function(){return n},n}function Un(){var n=Object(f.a)(["\n  ","\n"]);return Un=function(){return n},n}var Wn=Object(l.b)(Un(),(function(n){n.theme;return Object(l.c)(Jn())})),Fn=Hn(),Pn=Fn.persistor,$n=Fn.store;c.a.render(a.a.createElement(l.a,{theme:{colors:{darkTurquoise:"#8ac2e5",faintLimeGreen:"#0ddb588c",grey:"#4b6b7e",lightBlack:"#323232",lightBlue:"#dcffffde",lightTurquoise:"#8dd0e5",lilac:"#9a8ae5",limeGreen:"#37d486",midBlue:"#3789d4",pastelBlue:"#6785e1",pink:"#ffa5ac",transparent:"rgba(0, 0, 0, 0)",white:"#ffffff"}}},a.a.createElement(Wn,null),a.a.createElement(u.a,{store:$n},a.a.createElement(i.a,{loading:null,persistor:Pn},a.a.createElement(an,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.c8ed1a0c.chunk.js.map